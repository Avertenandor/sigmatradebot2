# üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è SigmaTrade Bot

–≠—Ç–æ—Ç –≥–∞–π–¥ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è, —á—Ç–æ–±—ã
–ø—Ä–æ–µ–∫—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é ¬´0 –æ—à–∏–±–æ–∫ –æ—Ç —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä–∞, –ª–∏–Ω—Ç–µ—Ä–∞ –∏
—Ç–∏–ø–∏–∑–∞—Ç–æ—Ä–∞¬ª.

## üìç –ö–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∫–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã

- **–ö–æ—Ä–µ–Ω—å**: `sigmatradebot/`
- **Python**: 3.11 (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `Dockerfile.python`)
- **–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏**:
  - `requirements.txt` ‚Äî —Å–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
  - `pytest.ini` ‚Äî –±–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ—Å—Ç–æ–≤
  - `alembic.ini` + `alembic/` ‚Äî –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
  - `Makefile`, `docker-compose*.yml` ‚Äî –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (PowerShell)

```powershell
# 1. –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv .venv
.\.venv\Scripts\Activate.ps1

# 2. –û–±–Ω–æ–≤–∏—Ç—å pip –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
python -m pip install --upgrade pip
pip install -r requirements.txt

# 3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã (—Å–º. .env.example)
copy .env.example .env
# –∑–∞–ø–æ–ª–Ω–∏—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–ë–î, Telegram, –∫–ª—é—á–∏)
```

## üóÉÔ∏è PostgreSQL –¥–ª—è —Ç–µ—Å—Ç–æ–≤

1. –ü–æ–¥–Ω—è—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é –ë–î (–ø—Ä–∏–º–µ—Ä Docker):

  ```powershell
  docker run --rm -e POSTGRES_PASSWORD=postgres -e POSTGRES_DB=sigmatradebot_test -p 5432:5432 postgres:15
  ```

1. –£–∫–∞–∑–∞—Ç—å URL –≤ —Å–µ—Å—Å–∏–∏ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Ç–µ—Å—Ç–æ–≤:

  ```powershell
  $env:TEST_DATABASE_URL="postgresql+asyncpg://postgres:postgres@localhost:5432/sigmatradebot_test"
  ```

## üß™ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–æ–∫

```powershell
# –ò–º–ø–æ—Ä—Ç‚Äë—Å–º–æ—É–∫
python -m pytest tests/test_imports.py -v

# –Æ–Ω–∏—Ç‚Äë—Ç–µ—Å—Ç—ã
python -m pytest tests/unit -v

# –ü–æ–∫—Ä—ã—Ç–∏–µ
python -m pytest --cov=app --cov=bot --cov-report=html

# –õ–∏–Ω—Ç–µ—Ä (Ruff)
ruff check .
```

## üì¶ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

- **pydantic 2.7.4** –∏ **pydantic-settings 2.2.1** –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç
  —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (`pydantic._internal._signature` –¥–æ—Å—Ç—É–ø–µ–Ω, –æ—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞
  –∏—Å—á–µ–∑–∞—é—Ç).
- –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è `requirements.txt` –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å:

  ```powershell
  pip install -r requirements.txt
  ```

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ .py —Ñ–∞–π–ª–∞

1. –ö–æ–¥–∏—Ä–æ–≤–∫–∞ UTF-8 (–±–µ–∑ BOM).
2. –î–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫–∏ ‚â§ 79 —Å–∏–º–≤–æ–ª–æ–≤.
3. –ò–º–ø–æ—Ä—Ç—ã: stdlib ‚Üí –≤–Ω–µ—à–Ω–∏–µ ‚Üí –ª–æ–∫–∞–ª—å–Ω—ã–µ, –∞–ª—Ñ–∞–≤–∏—Ç –≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–∞.
4. –ü–æ–ª–Ω—ã–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–µ—è–≤–Ω–æ–≥–æ `Any`.
5. –õ–∏–Ω—Ç–µ—Ä/—Ç–∏–ø–∏–∑–∞—Ç–æ—Ä –±–µ–∑ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π.
6. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ ‚Äî —Ç–æ—á–µ—á–Ω—ã–π –ø—Ä–æ–≥–æ–Ω —Ç–µ—Å—Ç–æ–≤, —á—Ç–æ–±—ã –æ—Ç—Å–ª–µ–¥–∏—Ç—å
   runtime-–ø—Ä–æ–±–ª–µ–º—ã.

–°–æ–±–ª—é–¥–∞—è —ç—Ç–∏ —à–∞–≥–∏, –æ–∫—Ä—É–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º
¬´–ö–æ–º–∞–Ω–¥–∏—Ä–∞¬ª –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å –¥–ª—è –≤—Å–µ–π –∫–æ–º–∞–Ω–¥—ã.
