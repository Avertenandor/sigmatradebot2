# Production Check Complete - SigmaTrade Bot

–ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –±–æ—Ç–∞ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω-—Å–µ—Ä–≤–µ—Ä–µ.

---

## Rate Limiting –∏ DDoS Protection

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è rate-–ª–∏–º–∏—Ç–∞ –≤ –ª–æ–≥–∞—Ö

**–ö–æ–º–∞–Ω–¥–∞:**
```bash
cd /opt/sigmatradebot
docker compose -f docker-compose.python.yml logs bot | grep -i "rate limit"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ (31-–π –∑–∞–ø—Ä–æ—Å –∑–∞ –º–∏–Ω—É—Ç—É) –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–ª—è—Ç—å—Å—è –∑–∞–ø–∏—Å–∏ –≤–∏–¥–∞:
  ```
  WARNING: Rate limit exceeded for user 123456789: 31/30
  ```
- –ó–∞–ø—Ä–æ—Å—ã –ø–æ—Å–ª–µ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å "–ø—Ä–æ–≥–ª–æ—á–µ–Ω—ã" (handler –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è)

**–ü—Ä–æ–≤–µ—Ä–∫–∞ OperationRateLimiter:**
```bash
docker compose -f docker-compose.python.yml logs bot | grep -i "operation.*limit\|—Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ"
```

**–û–∂–∏–¥–∞–µ–º—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:**
- "–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–æ–ø—ã—Ç–æ–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏" - –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π
- "–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–æ–ø—ã—Ç–æ–∫ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏" - –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- "–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–≤–æ–¥–æ–≤" - –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ –≤—ã–≤–æ–¥–æ–≤

---

## Admin Session Cleanup

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Å—Ç–∞—Ä—ã—Ö —Å–µ—Å—Å–∏–π

**SQL-–∑–∞–ø—Ä–æ—Å:**
```sql
-- –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ë–î
psql -U sigmatrade -d sigmatrade

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏
SELECT 
    id,
    admin_id,
    telegram_id,
    created_at,
    last_activity_at,
    NOW() - last_activity_at AS idle_time
FROM admin_sessions
WHERE last_activity_at < NOW() - INTERVAL '24 hours'
ORDER BY last_activity_at ASC;
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°–µ—Å—Å–∏–∏ —Å—Ç–∞—Ä—à–µ 24 —á–∞—Å–æ–≤ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª–µ–Ω—ã –∑–∞–¥–∞—á–µ–π `admin_session_cleanup`
- –ï—Å–ª–∏ –µ—Å—Ç—å —Å—Ç–∞—Ä—ã–µ —Å–µ—Å—Å–∏–∏, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ scheduler:
  ```bash
  docker compose -f docker-compose.python.yml logs scheduler | grep -i "session.*cleanup"
  ```

**–†—É—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):**
```sql
-- –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Å–µ—Å—Å–∏–∏ —Å—Ç–∞—Ä—à–µ 24 —á–∞—Å–æ–≤
DELETE FROM admin_sessions
WHERE last_activity_at < NOW() - INTERVAL '24 hours';
```

---

## –≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∞–¥–º–∏–Ω–æ–≤

### –ß–µ—Ä–µ–∑ SQL (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Ç—É–∞—Ü–∏—è)

**–í–ê–ñ–ù–û:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –≤ —Å–ª—É—á–∞–µ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏ –∏–ª–∏ —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏!

**–®–∞–≥–∏:**
1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ë–î:
   ```bash
   docker compose -f docker-compose.python.yml exec postgres psql -U sigmatrade -d sigmatrade
   ```

2. –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏:
   ```sql
   DELETE FROM admin_sessions;
   ```

3. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –í—Ä–µ–º–µ–Ω–Ω–æ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ—Ö –∞–¥–º–∏–Ω–æ–≤:
   ```sql
   -- –ù–ï —É–¥–∞–ª—è—Ç—å –∑–∞–ø–∏—Å–∏, —Ç–æ–ª—å–∫–æ –æ—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö
   -- –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ emergency block —á–µ—Ä–µ–∑ –±–æ—Ç–∞
   ```

4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
   ```sql
   SELECT COUNT(*) FROM admin_sessions;
   -- –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å 0
   ```

**–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞:**
- –ê–¥–º–∏–Ω—ã –¥–æ–ª–∂–Ω—ã –±—É–¥—É—Ç –∑–∞–Ω–æ–≤–æ –≤–æ–π—Ç–∏ —á–µ—Ä–µ–∑ `/admin` —Å –º–∞—Å—Ç–µ—Ä-–∫–ª—é—á–æ–º
- Super admin –º–æ–∂–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ emergency block –∏–ª–∏ –ø—Ä—è–º–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –ë–î

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ Security-–ª–æ–≥–æ–≤

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è security-—Å–æ–±—ã—Ç–∏–π

**–ö–æ–º–∞–Ω–¥–∞:**
```bash
docker compose -f docker-compose.python.yml logs bot | grep -i "\[SECURITY\]"
```

**–û–∂–∏–¥–∞–µ–º—ã–µ —Å–æ–±—ã—Ç–∏—è:**
- `[SECURITY] Admin login rate limit exceeded` - –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ –ª–æ–≥–∏–Ω–æ–≤ –∞–¥–º–∏–Ω–∞ (5 –ø–æ–ø—ã—Ç–æ–∫/—á–∞—Å)
- `[SECURITY] Telegram ID blocked due to failed admin login attempts` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±–∞–Ω –ø–æ—Å–ª–µ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞
- `[SECURITY] EMERGENCY: Admin terminated` - —ç–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∞–¥–º–∏–Ω–∞ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- `[SECURITY] User blocked` - –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
- `[SECURITY] User terminated` - —Ç–µ—Ä–º–∏–Ω–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
- `[SECURITY] Terminated user attempted to use bot` - –ø–æ–ø—ã—Ç–∫–∞ —Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ—Ç–∞
- `[SECURITY] Blocked user attempted non-appeal action` - –ø–æ–ø—ã—Ç–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–µ-–∞–ø–µ–ª–ª—è—Ü–∏–æ–Ω–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —á–∞—Å—Ç–æ—Ç—ã —Å–æ–±—ã—Ç–∏–π:**
```bash
docker compose -f docker-compose.python.yml logs bot --since 1h | grep -c "\[SECURITY\]"
```

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ Earnings Blocked Lifecycle

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø—Ä–∏ finpass recovery

**SQL-–∑–∞–ø—Ä–æ—Å:**
```sql
-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ recovery-–∑–∞—è–≤–∫–∞–º–∏ –∏ earnings_blocked
SELECT 
    u.id,
    u.telegram_id,
    u.earnings_blocked,
    fpr.status AS recovery_status,
    fpr.created_at AS recovery_created
FROM users u
JOIN financial_password_recovery fpr ON u.id = fpr.user_id
WHERE fpr.status IN ('pending', 'in_review', 'approved', 'sent')
AND u.earnings_blocked = FALSE;
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ó–∞–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å 0 —Å—Ç—Ä–æ–∫ (–≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ recovery –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å `earnings_blocked = TRUE`)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ—Å–ª–µ –≤—ã–≤–æ–¥–∞

**SQL-–∑–∞–ø—Ä–æ—Å:**
```sql
-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å earnings_blocked=True, –Ω–æ –±–µ–∑ –∞–∫—Ç–∏–≤–Ω—ã—Ö recovery
SELECT 
    u.id,
    u.telegram_id,
    u.earnings_blocked,
    COUNT(t.id) AS withdrawal_count,
    MAX(t.created_at) AS last_withdrawal
FROM users u
LEFT JOIN financial_password_recovery fpr ON u.id = fpr.user_id
    AND fpr.status IN ('pending', 'in_review', 'approved', 'sent')
LEFT JOIN transactions t ON u.id = t.user_id
    AND t.type = 'withdrawal'
WHERE u.earnings_blocked = TRUE
AND fpr.id IS NULL  -- –ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö recovery
GROUP BY u.id, u.telegram_id, u.earnings_blocked
HAVING COUNT(t.id) > 0;  -- –ï—Å—Ç—å –≤—ã–≤–æ–¥—ã
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ï—Å–ª–∏ –µ—Å—Ç—å —Ç–∞–∫–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, —ç—Ç–æ –º–æ–∂–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –ø—Ä–æ–±–ª–µ–º—É –≤ –ª–æ–≥–∏–∫–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
- –í –Ω–æ—Ä–º–µ: –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ —Å –Ω–æ–≤—ã–º –ø–∞—Ä–æ–ª–µ–º `earnings_blocked` –¥–æ–ª–∂–µ–Ω —Å—Ç–∞—Ç—å `FALSE`

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ Admin Role Source

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ —Ä–æ–ª–µ–π

**SQL-–∑–∞–ø—Ä–æ—Å:**
```sql
-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å is_admin=TRUE, –Ω–æ –±–µ–∑ –∑–∞–ø–∏—Å–∏ –≤ Admin table
SELECT 
    u.id,
    u.telegram_id,
    u.is_admin,
    a.id AS admin_table_id
FROM users u
LEFT JOIN admins a ON u.telegram_id = a.telegram_id
WHERE u.is_admin = TRUE
AND a.id IS NULL;
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ó–∞–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å 0 —Å—Ç—Ä–æ–∫ (–ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ `20251120_072315_cleanup_user_is_admin`)
- –ï—Å–ª–∏ –µ—Å—Ç—å —Å—Ç—Ä–æ–∫–∏, —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –±—ã–ª–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –∏–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏:**
```sql
-- –ê–¥–º–∏–Ω—ã –≤ Admin table –±–µ–∑ is_admin=TRUE –≤ users
SELECT 
    a.id,
    a.telegram_id,
    a.role,
    u.id AS user_id,
    u.is_admin
FROM admins a
LEFT JOIN users u ON a.telegram_id = u.telegram_id
WHERE u.id IS NULL OR u.is_admin = FALSE;
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ: –∞–¥–º–∏–Ω –º–æ–∂–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤ Admin table –±–µ–∑ –∑–∞–ø–∏—Å–∏ –≤ users (–µ—Å–ª–∏ –µ—â–µ –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω)
- –ò–ª–∏ `is_admin` –º–æ–∂–µ—Ç –±—ã—Ç—å `FALSE` - —ç—Ç–æ –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–∞–≤–∞ –±–µ—Ä—É—Ç—Å—è –∏–∑ Admin table

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ Financial Password Verification

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ä–æ–ª—è

**–õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –±–æ—Ç —Å –Ω–µ–≤–µ—Ä–Ω—ã–º —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º –ø–∞—Ä–æ–ª–µ–º
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∑–∞—è–≤–∫–∞ –Ω–∞ –≤—ã–≤–æ–¥ –ù–ï —Å–æ–∑–¥–∞–Ω–∞
3. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∑–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∞

**SQL-–ø—Ä–æ–≤–µ—Ä–∫–∞:**
```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞—è–≤–∫–∏ –Ω–∞ –≤—ã–≤–æ–¥
SELECT 
    t.id,
    t.user_id,
    t.amount,
    t.status,
    t.created_at,
    u.telegram_id
FROM transactions t
JOIN users u ON t.user_id = u.id
WHERE t.type = 'withdrawal'
ORDER BY t.created_at DESC
LIMIT 10;
```

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –ó–∞—è–≤–∫–∏ –¥–æ–ª–∂–Ω—ã —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ä–æ–ª—è
- –í –ª–æ–≥–∞—Ö –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ —Ç–∏–ø–∞ "verify_financial_password called without await"

---

## –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç

### –£—Ç—Ä–µ–Ω–Ω—è—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏: `docker compose logs bot --since 6h | grep -i "error\|exception\|traceback"`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å security-—Å–æ–±—ã—Ç–∏—è: `docker compose logs bot --since 6h | grep -c "\[SECURITY\]"`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤: `docker compose ps`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤: `docker stats --no-stream`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å health endpoint: `curl http://localhost:8080/health`

### –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å earnings_blocked (SQL-–∑–∞–ø—Ä–æ—Å—ã –≤—ã—à–µ)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å admin roles (SQL-–∑–∞–ø—Ä–æ—Å—ã –≤—ã—à–µ)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ä—ã–µ admin sessions: `SELECT COUNT(*) FROM admin_sessions WHERE last_activity_at < NOW() - INTERVAL '7 days';`
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å `scripts/admin_activity_report.py` –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∞–¥–º–∏–Ω–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å RPC stats –≤ health endpoint: `curl -s http://localhost:8080/health | jq '.checks.blockchain.rpc_stats'`

---

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
```bash
docker compose -f docker-compose.python.yml logs -f bot
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
docker compose -f docker-compose.python.yml restart bot worker scheduler
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
```bash
docker compose -f docker-compose.python.yml exec bot python -c "from app.config.database import async_session_maker; import asyncio; asyncio.run(async_session_maker().__aenter__())"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ Redis
```bash
docker compose -f docker-compose.python.yml exec redis redis-cli ping
```

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π

- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏—è –∞–¥–º–∏–Ω–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å "üõë –≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∞–¥–º–∏–Ω–∞" –≤ –±–æ—Ç–µ
- **–ü—Ä–æ–±–ª–µ–º—ã —Å –ë–î:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ PostgreSQL –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- **–ü—Ä–æ–±–ª–µ–º—ã —Å Redis:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Redis –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- **DDoS –∞—Ç–∞–∫–∞:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ rate limiting, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É–∂–µ—Å—Ç–æ—á–∏—Ç—å –ª–∏–º–∏—Ç—ã

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-11-20  
**–í–µ—Ä—Å–∏—è:** 1.0
